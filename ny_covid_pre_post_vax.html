<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>N.Y. COVID-19 Trends Pre- and Post-Vaccine Availability</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="report.html">Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exploratory
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">COVID Case and Death Rates</li>
    <li>
      <a href="covid_deaths_bysex.html">By Sex</a>
    </li>
    <li>
      <a href="covid_deaths_by_race_education.html">By Race/Education</a>
    </li>
    <li>
      <a href="covid_pre_post_vacc.html">United States</a>
    </li>
    <li>
      <a href="ny_covid_pre_post_vax.html">New York State</a>
    </li>
    <li>
      <a href="nyc_covid_pre_post_vax.html">New York City</a>
    </li>
    <li>
      <a href="case death.html">Projected</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Vaccination Data</li>
    <li>
      <a href="vaccine_distribution_uptake.html">Vaccine Distribution/Uptake</a>
    </li>
    <li>
      <a href="percent_vax_eth-race.html">Vaccination Rates</a>
    </li>
    <li>
      <a href="vaccine_hesitancy.html">Vaccination Hesitancy</a>
    </li>
    <li>
      <a href="percent_hesitant.html">Vaccination Hesitancy 2</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">N.Y. COVID-19 Trends Pre- and Post-Vaccine Availability</h1>

</div>


<pre class="r"><code>library(tidyverse)
library(patchwork)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = &quot;90%&quot;
)

theme_set(theme_minimal() + theme(legend.position = &quot;bottom&quot;))

options(
  ggplot2.continuous.colour = &quot;viridis&quot;,
  ggplot2.continuous.fill = &quot;viridis&quot;
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d</code></pre>
<pre class="r"><code>ny_covid = 
  read_csv(&quot;./data/us-states.csv&quot;) %&gt;% 
  filter(state == &quot;New York&quot;) %&gt;% 
  mutate(day = 1:645,
         dc_ratio = deaths/cases) %&gt;% 
  select(-fips)</code></pre>
<p>In order to investigate the effect that vaccine release had on the trajectory of the pandemic, we first had to separate our data into pre-vaccine and post-vaccine dates. The date 12/14/20 was used as the date when vaccines became available in the U.S. Date was converted to “day of pandemic” in order to fit a line of best fit on a numeric variable instead of YYYY-MM-DD date format. The data from NY Times consisted of cumulative case and death counts, and from this we first looked at the death to case ratio curve overall, then separated into pre- and post-vaccine availability to see whether the presence of a vaccine changed the death/case ratio. Below is a look at that data for the the state of New York specifically.</p>
<div id="deathcase-ratio" class="section level2">
<h2>Death/Case Ratio</h2>
<pre class="r"><code>total_ratio_p = 
  ny_covid %&gt;% 
  ggplot(aes(x = day, y = dc_ratio)) +
  geom_line() +
  labs(title = &quot;N.Y. Death to Cases Ratio from 3/01/20 to 12/05/21&quot;,
       x = &quot;Day&quot;, y = &quot;Ratio&quot;) +
  geom_vline(xintercept = 329, linetype=&quot;solid&quot;, 
                color = &quot;red&quot;, size=0.5)

pre_vacc_ratio_p = 
  ny_covid %&gt;% 
  slice(1:288) %&gt;% 
  ggplot(aes(x = day, y = dc_ratio)) +
  geom_line() +
  labs(title = &quot;3/01/20 to 12/13/20 (Pre-Vaccine)&quot;,
       x = &quot;Day&quot;, y = &quot;Ratio&quot;) +
  theme(plot.title = element_text(size=10))

post_vacc_ratio_p = 
  ny_covid %&gt;% 
  slice(289:645) %&gt;% 
  ggplot(aes(x = day, y = dc_ratio)) +
  geom_line() +
  labs(title = &quot;12/14/20 to 12/05/21 (Post-Vaccine)&quot;,
       x = &quot;Day&quot;, y = &quot;Ratio&quot;) +
  theme(plot.title = element_text(size=10))

total_ratio_p / (pre_vacc_ratio_p + post_vacc_ratio_p)</code></pre>
<p><img src="ny_covid_pre_post_vax_files/figure-html/unnamed-chunk-3-1.png" width="90%" /></p>
<p>The cases and deaths in New York state do not seem to occur until March, which is delayed by over a month from the rest of the United States data. As such, there is no spike at the very beginning, but there is a large increase from 0 to 8 percent in the death to case ratio. Again, this is likely due to lack of any unifying knowledge about the virus or the pandemic, allowing it to spread freely. At this point in time, it was just beginning to be understood what in fact was going on. More drastically than the whole U.S. data though, around the winter-time when cases were spiking and at an all time high, the death to case ratio was dropping in New York state, and continued to drop after the availability of a vaccine. Although vaccine uptake was obviously not 100% in NY, it was better than the national average, and as such caused the ratio to continue to drop, as it was not confounded by states with poor vaccine uptake like the United States data. We can see from the post-vaccine ratio curve that after the vaccine was released, the death to case ratio continued to drop to the present and never experienced a second upward trend. This reduction in deaths from COVID cases may well be attributed to the effects of the vaccine and its availability.</p>
</div>
<div id="cases" class="section level2">
<h2>Cases</h2>
<pre class="r"><code>total_ny_case_lm = 
  lm(cases ~ day, data = ny_covid) %&gt;% 
  broom::tidy()
total_ny_case_p = 
  ny_covid %&gt;% 
  ggplot(aes(x = day, y = cases)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, formula = y ~ x) +
  labs(title = &quot;N.Y. COVID-19 Cases from 3/01/20 to 12/05/21&quot;,
       x = &quot;Day&quot;, y = &quot;Cases&quot;)

pre_vacc_case_lm = 
  ny_covid %&gt;% 
  slice(1:328) %&gt;% 
  lm(cases ~ day, data = .) %&gt;% 
  broom::tidy()
pre_vacc_case_p = 
  ny_covid %&gt;% 
  slice(1:328) %&gt;% 
  ggplot(aes(x = day, y = cases)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, formula = y ~ x) +
  labs(title = &quot;3/01/20 to 12/13/20 (Pre-Vaccine)&quot;,
       x = &quot;Day&quot;, y = &quot;Cases&quot;) +
  theme(plot.title = element_text(size=10))

post_vacc_case_lm = 
  ny_covid %&gt;% 
  slice(329:663) %&gt;% 
  lm(cases ~ day, data = .) %&gt;% 
  broom::tidy()
post_vacc_case_p = 
  ny_covid %&gt;% 
  slice(329:663) %&gt;%
  ggplot(aes(x = day, y = cases)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, formula = y ~ x) +
  labs(title = &quot;12/14/20 to 12/05/21 (Post-Vaccine)&quot;,
       x = &quot;Day&quot;, y = &quot;Cases&quot;) +
  theme(plot.title = element_text(size=10))

total_ny_case_p / (pre_vacc_case_p + post_vacc_case_p)</code></pre>
<p><img src="ny_covid_pre_post_vax_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<p>As with the United States data, looking at the slops for the lines of best fit for cases, we can see that the rate of cases did continue even after the vaccine’s availability. Whether this is because of poor vaccine uptake or effectiveness will be investigated in the vaccination data pages, but the post-vaccination to pre-vaccination case ratio is significantly less in New York state than in the United States at large (1.39 vs 1.77) indicating that New York state fared better than the U.S. as a whole when it came to the rate of cases after the vaccine’s availability. Again, whether this difference is due to differences in vaccine uptake will be investigated. Visually however, the spike of cases seen during the winter season, around when the vaccine was first released, did not seem to replicate itself after its availability in the state of New York. Again, whether that was due to the vaccine’s availability itself, seasonal factors, or others is a matter of conjecture and debate.</p>
</div>
<div id="deaths" class="section level2">
<h2>Deaths</h2>
<pre class="r"><code>total_ny_death_lm = 
  lm(deaths ~ day, data = ny_covid) %&gt;% 
  broom::tidy()
total_ny_death_p = 
  ny_covid %&gt;% 
  ggplot(aes(x = day, y = deaths)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, formula = y ~ x) +
  labs(title = &quot;N.Y. COVID-19 Deaths from 3/01/20 to 12/05/21&quot;,
       x = &quot;Day&quot;, y = &quot;Deaths&quot;)

pre_vacc_death_lm = 
  ny_covid %&gt;% 
  slice(1:328) %&gt;% 
  lm(deaths ~ day, data = .) %&gt;% 
  broom::tidy()
pre_vacc_death_p = 
  ny_covid %&gt;% 
  slice(1:328) %&gt;% 
  ggplot(aes(x = day, y = deaths)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, formula = y ~ x) +
  labs(title = &quot;3/01/20 to 12/13/20 (Pre-Vaccine)&quot;,
       x = &quot;Day&quot;, y = &quot;Deaths&quot;) +
  theme(plot.title = element_text(size=10))

post_vacc_death_lm = 
  ny_covid %&gt;% 
  slice(329:663) %&gt;% 
  lm(deaths ~ day, data = .) %&gt;% 
  broom::tidy()
post_vacc_death_p = 
  ny_covid %&gt;% 
  slice(329:663) %&gt;% 
  ggplot(aes(x = day, y = deaths)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, formula = y ~ x) +
  labs(title = &quot;12/14/20 to 12/05/21 (Post-Vaccine)&quot;,
       x = &quot;Day&quot;, y = &quot;Deaths&quot;) +
  theme(plot.title = element_text(size=10))

total_ny_death_p / (pre_vacc_death_p + post_vacc_death_p)</code></pre>
<p><img src="ny_covid_pre_post_vax_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
<p>One thing that can be relayed from the plots of deaths and death rate in New York state is that the vaccine’s availability did reduce the slope of the line of best fit, and therefore the reduction in COVID deaths post-vaccine release mat be attributable to the vaccine itself. Unlike the United States data, which was likely confounded by states with poor vaccine uptake and high vaccine hesitancy, New York state saw a drop in the amount of cases per day after the vaccine became available, according to the slops of these lines of fit. We will attempt to corroborate this finding with vaccine uptake data by state in the coming pages. Again, comparing the ratio of post-vaccine deaths to pre-vaccine deaths from New York to the United States as a whole, we see that in NY this ratio is 0.39 vs 1.14. This means that New York states experienced 39% the amount of deaths after the vaccine became available, or a 61% drop in deaths from COVID as opposed to the United States at large, which experienced 114% the deaths from COVID after the vaccine was relased. Essentially, even with a vaccine available to the population, deaths increased by 14% across the United States due to COVID. We’ll see if a disparity in vaccine uptake between New York and the rest of the country is the reason for this big difference.</p>
</div>
<div id="slopes" class="section level2">
<h2>Slopes</h2>
<pre class="r"><code>tibble(
  metric = c(&quot;intercept&quot;, &quot;slope&quot;),
  total_case = pull(total_ny_case_lm, estimate),
  pre_vacc_case = pull(pre_vacc_case_lm, estimate),
  post_vacc_case = pull(post_vacc_case_lm, estimate),
  total_death = pull(total_ny_death_lm, estimate),
  pre_vacc_death = pull(pre_vacc_death_lm, estimate),
  post_vacc_death = pull(post_vacc_death_lm, estimate)) %&gt;% 
  knitr::kable()</code></pre>
<table>
<colgroup>
<col width="10%" />
<col width="12%" />
<col width="14%" />
<col width="15%" />
<col width="12%" />
<col width="15%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">metric</th>
<th align="right">total_case</th>
<th align="right">pre_vacc_case</th>
<th align="right">post_vacc_case</th>
<th align="right">total_death</th>
<th align="right">pre_vacc_death</th>
<th align="right">post_vacc_death</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">intercept</td>
<td align="right">-214418.736</td>
<td align="right">39249.724</td>
<td align="right">374906.914</td>
<td align="right">16427.94131</td>
<td align="right">12714.76779</td>
<td align="right">34727.1980</td>
</tr>
<tr class="even">
<td align="left">slope</td>
<td align="right">4618.628</td>
<td align="right">2573.132</td>
<td align="right">3584.467</td>
<td align="right">72.63666</td>
<td align="right">93.04059</td>
<td align="right">35.8191</td>
</tr>
</tbody>
</table>
<p>N.Y. State Post-vax/Pre-vax Case Ratio: 1.3930364 <span class="math inline">\(\\\)</span> N.Y. State Post-vax/Pre-vax Death Ratio: 0.3849835</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
